{"ast":null,"code":"import _slicedToArray from\"/Users/groovequeen/Desktop/photoapp-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import FlipMove from'react-flip-move';import'./Feed.css';import InputOption from'./InputOption';import CreateIcon from'@material-ui/icons/Create';import ImageIcon from'@material-ui/icons/Image';import SubscriptionsIcon from'@material-ui/icons/Subscriptions';import EventNoteIcon from'@material-ui/icons/EventNote';import CalendarViewDayIcon from'@material-ui/icons/CalendarViewDay';import Post from'./Post';// import db from local db\nimport{db}from'./Firebase';import Firebase from'./Firebase';import{useSelector}from'react-redux';import{selectUser}from'./features/userSlice';// useState = Hook // RE-EXPLAIN 2:20\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Feed(){var user=useSelector(selectUser);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];//! useEffect hook allows us to fire off code when the Feed component loads. \n//! It also allows us to fire off whatever the component re-renders if we don't pass a second argument.\n//! If we pass on a blank dependency like [empty array] in line 21, then it will fire off once the feed component loads but it will never fire off again after that \nuseEffect(function(){db.collection('posts').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setPosts(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});//real time posts collection when posts are add/deleted\n},[]);// prevent refreshing\nvar sendPost=function sendPost(e){e.preventDefault();db.collection('posts').add({name:user.displayName,description:user.email,message:input,photoURL:user.photoUrl||'',timestamp:Firebase.firestore.FieldValue.serverTimestamp()});setInput('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"feed\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feed_inputContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feed_input\",children:[/*#__PURE__*/_jsx(CreateIcon,{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:function onChange(e){return setInput(e.target.value);},type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendPost,type:\"submit\",children:\"Send\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feed_inputOptions\",children:[/*#__PURE__*/_jsx(InputOption,{Icon:ImageIcon,title:\"Photo\",color:\"#70B5F9\"}),/*#__PURE__*/_jsx(InputOption,{Icon:SubscriptionsIcon,title:\"Video\",color:\"#E7A33E\"}),/*#__PURE__*/_jsx(InputOption,{Icon:EventNoteIcon,title:\"Event\",color:\"#70B5F9\"}),/*#__PURE__*/_jsx(InputOption,{Icon:CalendarViewDayIcon,title:\"Write article\",color:\"#7FC15E\"})]})]}),/*#__PURE__*/_jsx(FlipMove,{children:posts.map(function(_ref){var id=_ref.id,_ref$data=_ref.data,name=_ref$data.name,description=_ref$data.description,message=_ref$data.message,photoURL=_ref$data.photoURL;return/*#__PURE__*/_jsx(Post,{name:name,description:description,message:message,photoURL:photoURL},id);})})]});}export default Feed;","map":{"version":3,"sources":["/Users/groovequeen/Desktop/photoapp-clone/src/Feed.js"],"names":["React","useEffect","useState","FlipMove","InputOption","CreateIcon","ImageIcon","SubscriptionsIcon","EventNoteIcon","CalendarViewDayIcon","Post","db","Firebase","useSelector","selectUser","Feed","user","input","setInput","posts","setPosts","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","data","sendPost","e","preventDefault","add","name","displayName","description","email","message","photoURL","photoUrl","timestamp","firestore","FieldValue","serverTimestamp","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport FlipMove from 'react-flip-move'\nimport './Feed.css'\nimport InputOption from './InputOption'\nimport CreateIcon from '@material-ui/icons/Create';\nimport ImageIcon from '@material-ui/icons/Image';\nimport SubscriptionsIcon from '@material-ui/icons/Subscriptions';\nimport EventNoteIcon from '@material-ui/icons/EventNote';\nimport CalendarViewDayIcon from '@material-ui/icons/CalendarViewDay';\nimport Post from './Post';\n// import db from local db\nimport { db } from './Firebase'\nimport Firebase from './Firebase'\nimport { useSelector } from 'react-redux';\nimport { selectUser } from './features/userSlice';\n\n// useState = Hook // RE-EXPLAIN 2:20\nfunction Feed() {\n const user = useSelector(selectUser);\n const [input, setInput] = useState('');\n const [posts, setPosts] = useState([]);\n \n //! useEffect hook allows us to fire off code when the Feed component loads. \n //! It also allows us to fire off whatever the component re-renders if we don't pass a second argument.\n //! If we pass on a blank dependency like [empty array] in line 21, then it will fire off once the feed component loads but it will never fire off again after that \n useEffect(() => {\n    db.collection('posts')\n      .orderBy('timestamp', 'desc')\n      .onSnapshot((snapshot) => \n        setPosts(\n            snapshot.docs.map((doc) => ({\n                id: doc.id,\n                data: doc.data(),\n            }))\n        )\n    );//real time posts collection when posts are add/deleted\n}, []);\n\n\n    // prevent refreshing\n    const sendPost = e => {\n        e.preventDefault();\n        db.collection('posts').add({\n            name: user.displayName,\n            description: user.email,\n            message: input,\n            photoURL: user.photoUrl || '',\n            timestamp: Firebase.firestore.FieldValue.serverTimestamp()\n        })\n\n        setInput('');\n    };\n\n    return <div className='feed'>\n        <div className='feed_inputContainer'>\n            <div className=\"feed_input\">\n                <CreateIcon />\n                <form>\n                    <input value={input} onChange={e => setInput(e.target.value)} type='text' />\n                    <button onClick={sendPost} type='submit'>Send</button>\n                </form>\n            </div>\n            <div className='feed_inputOptions'>\n                <InputOption Icon={ImageIcon} title='Photo' color='#70B5F9' />\n                <InputOption Icon={SubscriptionsIcon} title='Video' color='#E7A33E' />\n                <InputOption Icon={EventNoteIcon} title='Event' color='#70B5F9' />\n                <InputOption \n                 Icon={CalendarViewDayIcon}\n                 title='Write article'\n                 color= '#7FC15E' />\n            </div>\n        </div>\n\n        {/* Posts */}\n        <FlipMove>\n        {/* every time I have a post I render it on the browser */}\n        {posts.map(({id, data: {name, description, message, photoURL}}) => (\n            <Post \n                key={id}\n                name={name}\n                description={description}\n                message={message}\n                photoURL={photoURL}\n            />\n        ))}\n        </FlipMove>\n        </div>\n}\n\nexport default Feed\n"]},"metadata":{},"sourceType":"module"}